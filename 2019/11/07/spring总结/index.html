<!DOCTYPE html><html class="theme-next pisces use-motion" lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4"><link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222"><meta name="keywords" content="JAVA,Spring,"><link rel="alternate" href="/atom.xml" title="yddf Blog" type="application/atom+xml"><meta name="description" content="关于spring学习的一些总结"><meta property="og:type" content="article"><meta property="og:title" content="spring总结"><meta property="og:url" content="https://yddfwang.github.io/2019/11/07/spring%E6%80%BB%E7%BB%93/index.html"><meta property="og:site_name" content="yddf Blog"><meta property="og:description" content="关于spring学习的一些总结"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2019-11-07T06:49:40.000Z"><meta property="article:modified_time" content="2019-11-14T11:45:32.000Z"><meta property="article:author" content="yddf"><meta property="article:tag" content="JAVA"><meta property="article:tag" content="Spring"><meta name="twitter:card" content="summary"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Pisces",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"Author"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://yddfwang.github.io/2019/11/07/spring总结/"><title>spring总结 | yddf Blog</title><meta name="generator" content="Hexo 4.2.0"></head><body itemscope itemtype="http://schema.org/WebPage" lang="en"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">yddf Blog</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">Java</p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/%20" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/%20" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>Archives</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://yddfwang.github.io/2019/11/07/spring%E6%80%BB%E7%BB%93/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="yddf"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="yddf Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">spring总结</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-07T14:49:40+08:00">2019-11-07</time></span></div></header><div class="post-body" itemprop="articleBody"><center>关于spring学习的一些总结</center><a id="more"></a><h1 id="一、spring中的IoC"><a href="#一、spring中的IoC" class="headerlink" title="一、spring中的IoC"></a>一、spring中的IoC</h1><h2 id="1、控制反转的思想"><a href="#1、控制反转的思想" class="headerlink" title="1、控制反转的思想"></a>1、控制反转的思想</h2><p>采用IoC（Inversion of Control，控制反转）的思想解决代码耦合问题。</p><p>简单的说就是引入工厂（第三者），将原来在程序中手动创建管理的依赖的UserDaoImpl对象，交给工厂来创建管理。</p><p>步骤一:提供userDAO实例对象的工厂</p><p>UserDAOFactory.java:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDAOFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="comment">//提供获取对象的方法</span></span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> UserDAOImpl <span class="title">getUserDAO</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//返回实例对象</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span>  UserDAOImpl();</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>步骤二: 修改UserServiceImpl中获得对象的方式</p><p>UserServiceImpl.java:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">IUserService</span></span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">       System.out.println(<span class="string">"UserServiceImpl-service层方法调用了"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       <span class="comment">//调用dao层的方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//     IUserDAO userDAO = new UserDAOImpl();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//     userDAO.findUserByUsernameAndPassword();</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       <span class="comment">//ioc方式:</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">//创建工厂,利用工厂提供依赖的对象</span></span><br><span class="line"></span><br><span class="line">       UserDAOFactory userDAOFactory = <span class="keyword">new</span> UserDAOFactory();</span><br><span class="line"></span><br><span class="line">       UserDAOImpl userDAO = userDAOFactory.getUserDAO();</span><br><span class="line"></span><br><span class="line">       userDAO.findUserByUsernameAndPassword();</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>发现问题:工厂方法仍然需要返回具体类型的实例对象,存在代码耦合</strong></p><p>解决方案:使用反射技术传入具体类型的类字符串生产对象的实例:</p><p>UserDAOFactory.java:</p><p>//利用反射技术生产具体类型的实例对象</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">getBean</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> Class.forName(<span class="string">"cn.itcast.spring.a_quickstart.UserDaoImpl"</span>).newInstance();</span><br><span class="line">   &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserServiceImpl.java:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用反射方法获取对象</span></span><br><span class="line"></span><br><span class="line">       IUserDAO userDAO = (IUserDAO) userDAOFactory.getBean();</span><br><span class="line"></span><br><span class="line">       userDAO.findUserByUsernameAndPassword();</span><br></pre></td></tr></table></figure><p><strong>发现问题:类字符串是硬编码的,怎么动态的传入不同的类字符串呢?</strong></p><p>解决方案: 使用xml配置文件动态传入类字符串</p><p>IoC底层实现：工厂（设计模式）+ 反射（机制）+ 配置文件（xml）。</p><h2 id="2、spring核心配置文件-ApplicationContext-xml"><a href="#2、spring核心配置文件-ApplicationContext-xml" class="headerlink" title="2、spring核心配置文件(ApplicationContext.xml)"></a>2、spring核心配置文件(ApplicationContext.xml)</h2><p>ApplicationContext.xml的配置：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- bean: spring工厂创建的一个对象(反射机制)</span></span><br><span class="line"><span class="comment">	id/name:对象的名字,可以用来引用或者获取对象, 一般为类名或接口名称的首字母小写</span></span><br><span class="line"><span class="comment">	class:要创建的对象类型的类字符串,类名全路径</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userDAO"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.spring.a_quickstart.UserDAOImpl"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>通过spring工厂获取bean完成相关操作</p><p>在程序中创建spring工厂对象, 通过工厂对象加载spring的xml配置文件,生产配置文件中配置 的bean对应的对象</p><p>UserServiceImpl.java：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//spring配置方式,创建spring工厂,加载spring配置文件</span></span><br><span class="line">	 ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line">	 <span class="comment">//从spring工厂中获取对象,通过bean的id/name</span></span><br><span class="line">	 IUserDAO userDAO = (IUserDAO) ac.getBean(<span class="string">"userDAO"</span>);</span><br><span class="line">	 userDAO.findUserByUsernameAndPassword();</span><br></pre></td></tr></table></figure><p><strong>发现问题:该方式虽然解决了类与类之间的耦合关系,但却需要在获取对象的时候创建spring工厂,有没有更方便获取对象的依赖的方法呢?</strong></p><h2 id="3、DI依赖注入的实现"><a href="#3、DI依赖注入的实现" class="headerlink" title="3、DI依赖注入的实现"></a>3、DI依赖注入的实现</h2><p>DI：Dependency Injection 依赖注入，在Spring工厂负责创建Bean对象(dao,service)时，动态的将一个对象(dao)注入(setter方法)到另一个对象(service)中.</p><p>Di的做法是:由Spring容器创建了Service、Dao对象，并且在配置中将Dao传入Service，那么Service对象就包含了Dao对象的引用。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">自己理解：</span><br><span class="line"><span class="code">	依赖注入，就是说，主类A要实现一个功能x，而这个功能，即Java中所谓的方法，其实是类B中所具有的，</span></span><br><span class="line"><span class="code">	那么，在类A调用这个功能x的时候，就会对类B产生依赖，此时，就需要将类B进行依赖注入，即，一种是</span></span><br><span class="line"><span class="code">	在类A中，以set方法的方式，类传入类B，通过代码的执行，从而让类B注入到A中，让A具有操作这项功能，</span></span><br><span class="line"><span class="code">	即，引用类B方法的能力。----&gt;是为依赖注入</span></span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext直译为应用上下文，是用来加载Spring框架配置文件，来构建Spring的工厂对象，它也称之为Spring容器的上下文对象，也称之为Spring的容器。</span><br><span class="line">ApplicationContext 只是BeanFactory（Bean工厂，Bean就是一个java对象） 一个子接口：</span><br></pre></td></tr></table></figure><p>步骤一:将service对象也交给spring容器管理</p><p>applicationContext.xml：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string"></span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string"></span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- bean: spring工厂创建的一个对象(反射机制)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   id/name:对象的名字,可以用来引用或者获取对象, 一般为类名或接口名称的首字母小写</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   class:要创建的对象类型的类字符串,类名全路径</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userDAO"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.spring.a_quickstart.UserDAOImpl"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span> =<span class="string">"userService"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.spring.a_quickstart.UserServiceImpl"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- 注入对象 --&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- property 根据类中的setter方法进行属性注入 --&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- name:setter方法的后缀小写,比如setXxx 对应的name为xxx --&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- ref:引用哪一个bean(对象),值为bean的id/name --&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"userDAO"</span> <span class="attr">ref</span>=<span class="string">"userDAO"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>步骤二:在程序中定义属性提供setter方法：</p><p>UserServiceImpl.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">IUserService</span></span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//定义属性</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> IUserDAO userDAO;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserDAO</span><span class="params">(IUserDAO userDAO)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">this</span>.userDAO = userDAO;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">       System.out.println(<span class="string">"UserServiceImpl-service层方法调用了"</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//ioc:依赖注入</span></span><br><span class="line"></span><br><span class="line">       userDAO.findUserByUsernameAndPassword();</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>步骤三:测试运行,此时获取对象必须从spring工厂获取(在spring容器配置中才有依赖注入,自己创建的对象没有注入依赖关系)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//测试</span></span><br><span class="line"></span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//创建service的示例</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//IUserService userService = new UserServiceImpl();</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//userService.login();</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//创建spring工厂,获取spring管理的对象</span></span><br><span class="line"></span><br><span class="line">      ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line"></span><br><span class="line">      IUserService userService = (IUserService) ac.getBean(<span class="string">"userService"</span>);</span><br><span class="line"></span><br><span class="line">      userService.login();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>小结(重点):</strong></p><p><strong>IOC:控制反转,将对象创建管理的权利交给spring容器,获取对象通过spring工厂创建</strong></p><p><strong>DI:在spring容器中创建管理多个对象,通过 property标签将对象注入到需要依赖的对象中</strong></p><p><strong>为什么不直接使用顶层接口对象来操作呢？</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">* BeanFactory 采取延迟加载，第一次getBean时才会实例化Bean</span><br><span class="line"></span><br><span class="line">* Beanfactory的用法：</span><br><span class="line"></span><br><span class="line">     BeanFactory ac &#x3D; new XmlBeanFactory(new FileSystemResource(&quot;D:\applicationContext.xml&quot;));</span><br><span class="line"></span><br><span class="line">* ApplicationContext是对BeanFactory扩展，提供了更多功能</span><br><span class="line"></span><br><span class="line">    国际化处理</span><br><span class="line"></span><br><span class="line">    事件传递</span><br><span class="line"></span><br><span class="line">    Bean自动装配</span><br><span class="line"></span><br><span class="line">    各种不同应用层的Context实现</span><br><span class="line"></span><br><span class="line">ApplicationContext 更加强大，所以现在开发基本没人使用。</span><br></pre></td></tr></table></figure><p>Bean获取的两种方式：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getBean</span><span class="params">()</span></span>&#123;</span><br><span class="line">      ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);    </span><br><span class="line"></span><br><span class="line">      <span class="comment">//获取bean的两种方式</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//1.通过spring容器中bean的id/name获取</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//IUserService userService = (IUserService) ac.getBean("userService");</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//2.根据bean的类型或者bean接口的类型获取,一般使用接口类型</span></span><br><span class="line"></span><br><span class="line">      IUserService userService = (IUserService) ac.getBean(IUserService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">      userService.login();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>常用根据名称获取（id/name）,即第一种方式，使用spring容器中的标识获取对象</p><p>如果根据类型获取，配置了多个类型的话，则抛出异常：</p><p>applicationContext.xml：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span> =<span class="string">"userService1"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.spring.a_quickstart.UserServiceImpl"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"userDAO"</span> <span class="attr">ref</span>=<span class="string">"userDAO"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span> =<span class="string">"userService"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.spring.a_quickstart.UserServiceImpl"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- 注入对象 --&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- property 根据类中的setter方法进行属性注入 --&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- name:setter方法的后缀小写,比如setXxx 对应的name为xxx --&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- ref:引用哪一个bean(对象),值为bean的id/name --&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"userDAO"</span> <span class="attr">ref</span>=<span class="string">"userDAO"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="二、spring中的bean装配"><a href="#二、spring中的bean装配" class="headerlink" title="二、spring中的bean装配"></a>二、spring中的bean装配</h1><h2 id="1、实例化bean的四种方式"><a href="#1、实例化bean的四种方式" class="headerlink" title="1、实例化bean的四种方式"></a>1、实例化bean的四种方式</h2><h3 id="第一种方式-无参数构造器-（最常用）"><a href="#第一种方式-无参数构造器-（最常用）" class="headerlink" title="第一种方式 无参数构造器 （最常用）"></a>第一种方式 无参数构造器 （最常用）</h3><p>第一步：创建Bean1.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1。默认构造器(spring在创建bean的时候自动调用无参构造器来实例化，相当于new Bean1())</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bean1</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第二步：在spring容器applicationContext.xml中配置</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 实例化 bean的四种方式 --&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- 1.默认构造器实例化对象 --&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span> =<span class="string">"bean1"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.spring.b_xmlnewbean.Bean1"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>第三步:创建测试类获取bean对象</p><p>SpringTest.java:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//创建spring工厂</span></span><br><span class="line"></span><br><span class="line">      ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//1.默认构造器获取bean对象</span></span><br><span class="line"></span><br><span class="line">      Bean1 bean1 = (Bean1) ac.getBean(<span class="string">"bean1"</span>);</span><br><span class="line"></span><br><span class="line">      System.out.println(bean1);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="第二种方式：-静态工厂方法"><a href="#第二种方式：-静态工厂方法" class="headerlink" title="第二种方式： 静态工厂方法"></a>第二种方式： 静态工厂方法</h3><p>第一步：创建Bean2.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.静态工厂方法构造：用来在初始化bean2的时候，可以初始化其他的东西</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bean2</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第二步：创建Bean2Factory.java类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//静态工厂</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bean2Factory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//静态方法，用来返回对象的实例</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Bean2 <span class="title">getBean2</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">     <span class="comment">//在做实例化的时候，可以做其他的事情，即可以在这里写初始化其他对象的代码</span></span><br><span class="line"></span><br><span class="line">     <span class="comment">//Connection conn....</span></span><br><span class="line"></span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">new</span> Bean2();</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第三步：Spring的容器applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 2.静态工厂获取实例化对象 --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- class:直接指定到静态工厂类, factory-method: 指定生产实例的方法, spring容器在实例化工厂类的时候会自动调用该方法并返回实例对象 --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span> = <span class="string">"bean2"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.spring.b_xmlnewbean.Bean2Factory"</span> <span class="attr">factory-method</span>=<span class="string">"getBean2"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>第四步：测试类进行测试</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//先构建实例化获取spring的容器（工厂、上下文）</span></span><br><span class="line"></span><br><span class="line">       ApplicationContext applicationContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//2.静态工厂</span></span><br><span class="line"></span><br><span class="line">       Bean2 bean2=(Bean2) applicationContext.getBean(<span class="string">"bean2"</span>);</span><br><span class="line"></span><br><span class="line">       System.out.println(bean2);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="第三种方式：-实例工厂方法"><a href="#第三种方式：-实例工厂方法" class="headerlink" title="第三种方式： 实例工厂方法"></a>第三种方式： 实例工厂方法</h3><p>第一步：创建Bean3.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第三种bean，实例工厂方式创建</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bean3</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第二步：创建实例工厂Bean3Factory类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//实例工厂:必须new工厂--》bean</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bean3Factory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//普通的方法，非静态方法</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Bean3 <span class="title">getBean3</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//初始化实例对象返回</span></span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> Bean3();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第三步：Spring容器的配置：applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 3：实例工厂的方式实例化bean --&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bean3Factory"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.spring.b_xmlnewbean.Bean3Factory"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- factory-bean相当于ref：引用一个bean对象 --&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bean3"</span> <span class="attr">factory-bean</span>=<span class="string">"bean3Factory"</span> <span class="attr">factory-method</span>=<span class="string">"getBean3"</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>第四步：使用测试代码，进行测试：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//先构建实例化获取spring的容器（工厂、上下文）</span></span><br><span class="line"></span><br><span class="line">      ApplicationContext applicationContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//3.实例工厂</span></span><br><span class="line"></span><br><span class="line">      Bean3 bean3=(Bean3) applicationContext.getBean(<span class="string">"bean3"</span>);</span><br><span class="line"></span><br><span class="line">      System.out.println(bean3);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="第四种方式-FactoryBean方式"><a href="#第四种方式-FactoryBean方式" class="headerlink" title="第四种方式: FactoryBean方式:"></a>第四种方式: FactoryBean方式:</h3><p>第一步: 创建Bean4:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bean4</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第二步: 创建Bean4Factory:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.FactoryBean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bean4Factory</span> <span class="keyword">implements</span> <span class="title">FactoryBean</span>&lt;<span class="title">Bean4</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="comment">//产生对象</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Bean4 <span class="title">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> Bean4();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isSingleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第三步: 配置applicationContext.xml:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!--方式四:FactoryBean--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--spring在实例化对象的时候回判断是否该对象实现了FactoryBean接口,如果实现了就直接调用getObject()方法,并返回执行结果--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bean4"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.spring.b_xmlnewbean.Bean4Factory"</span>/&gt;</span></span><br></pre></td></tr></table></figure><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>四种方式：</p><p><strong>第一种：最常用</strong></p><p>第二、第三种：一些框架初始化的时候用的多。</p><p>第四种:spring底层实现的比较多,整合其他框架</p><p>此处的装配仅是class由Java bean变成了spring bean。而没有涉及到属性装配的问题。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">面试题:</span><br><span class="line"></span><br><span class="line">BeanFactory: spring工厂的顶层接口</span><br><span class="line"></span><br><span class="line">FactoryBean: 用来创建工厂中的某一个类型对象</span><br></pre></td></tr></table></figure><h1 id="三、bean的作用域"><a href="#三、bean的作用域" class="headerlink" title="三、bean的作用域"></a>三、bean的作用域</h1><table><thead><tr><th>类别</th><th align="left">说明</th></tr></thead><tbody><tr><td>singleton</td><td align="left">在Spring IoC容器中仅存在一个Bean实例，Bean以单例方式存在</td></tr><tr><td>prototype</td><td align="left">每次从容器中调用Bean时，都返回一个新的实例，即每次调用getBean()时，相当于执行 new XxxBean()</td></tr><tr><td>request</td><td align="left">每次HTTP请求都会创建一个新的Bean，该作用域仅适用于WebApplicationContext环境</td></tr><tr><td>session</td><td align="left">同一个HTTP Session共享一个Bean，不同Session使用不同Bean，仅适用于WebApplicationContext环境</td></tr><tr><td>globalSession</td><td align="left">一般用于porlet应用环境，该作用域仅适用于WebApplicationContext</td></tr></tbody></table><p>项目开发中通常会使用：singleton 单例、 prototype多例</p><p>Singleton： 在一个spring容器中，对象只有一个实例。（默认值）</p><p>Prototype：在一个容器中，存在多个实例，每次返回一个新的实例</p><p>第一步：创建类SingletonBean.java和PrototypeBean.java</p><p>创建类SingletonBean.java类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//单例bean</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonBean</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SingletonBean</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">       System.out.println(<span class="string">"SingletonBean:实例化了单例"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>创建类PrototypeBean.java类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//多例bean</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PrototypeBean</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PrototypeBean</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">       System.out.println(<span class="string">"--PrototypeBean实例化了多例的"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第二步：定义spring容器，applicationContext.xml:</p><pre><code><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       bean的作用范围</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">       scope:配置作用范围的，默认值就是singleton单例</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 单例 --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- &lt;bean id="singletonBean" class="cn.itcast.spring.c_xmlscope.SingletonBean" scope="singleton"/&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"singletonBean"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.spring.c_xmlscope.SingletonBean"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 多例 --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"prototypeBean"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.spring.c_xmlscope.PrototypeBean"</span> <span class="attr">scope</span>=<span class="string">"prototype"</span>/&gt;</span></span><br></pre></td></tr></table></figure></code></pre><p>第三步：测试代码，创建SpringTest.java：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//newbean的方式</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringTest</span> </span>&#123;    </span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//先构建实例化获取spring的容器（工厂、上下文）</span></span><br><span class="line"></span><br><span class="line">       ApplicationContext applicationContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//目标1：看看多次获取bean的时候，是不是同一个</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">//目标2：看看bean什么时候初始化的</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">//获取单例的bean：应该是同一个</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">//单例：每次从spring容器中获取的对象，是同一个对象</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">//单例初始化：是在spring容器初始化的时候，就初始化了</span></span><br><span class="line"></span><br><span class="line">       SingletonBean singletonBean1=(SingletonBean)applicationContext.getBean(<span class="string">"singletonBean"</span>);</span><br><span class="line"></span><br><span class="line">       SingletonBean singletonBean2=(SingletonBean)applicationContext.getBean(<span class="string">"singletonBean"</span>);</span><br><span class="line"></span><br><span class="line">       System.out.println(singletonBean1);</span><br><span class="line"></span><br><span class="line">       System.out.println(singletonBean2);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//获取多例的bean：</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">//多例：每次从spring容器中获取的对象，不是同一个对象</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">//多例初始化：是在getBean的时候初始化，相当于每次getbean就是在new Bean（）</span></span><br><span class="line"></span><br><span class="line">       PrototypeBean prototypeBean1=(PrototypeBean)applicationContext.getBean(<span class="string">"prototypeBean"</span>);</span><br><span class="line"></span><br><span class="line">       PrototypeBean prototypeBean2=(PrototypeBean)applicationContext.getBean(<span class="string">"prototypeBean"</span>);</span><br><span class="line"></span><br><span class="line">       System.out.println(prototypeBean1);</span><br><span class="line"></span><br><span class="line">       System.out.println(prototypeBean2);      </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="四、servlet的三层架构处理方式"><a href="#四、servlet的三层架构处理方式" class="headerlink" title="四、servlet的三层架构处理方式"></a>四、servlet的三层架构处理方式</h1><p>// servlet是依托于tomcat容器所存在的。<br>// servlet可以接收前端数据</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Servlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> UserService userService = <span class="keyword">new</span> UserServiceImpl();</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> throw ServletException </span>&#123;</span><br><span class="line">  doPost(request, response);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> throw ServletException </span>&#123;</span><br><span class="line">      <span class="comment">//接收前端发来的数据/方法等</span></span><br><span class="line">      String username = request.getparameter(<span class="string">"username"</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//交给service层处理</span></span><br><span class="line">      String userStr = userService.queryUserByusername(username);</span><br><span class="line">      <span class="comment">//这里已经经过了Service层的处理。即</span></span><br><span class="line">      <span class="comment">/**   service层的处理：</span></span><br><span class="line"><span class="comment">        public class UserServiceImpl impliment UserService&#123;</span></span><br><span class="line"><span class="comment">            private UserDao userDao = new UserDaoImpl();</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            <span class="doctag">@Override</span></span></span><br><span class="line"><span class="comment">            public String queryUser(String username) &#123;</span></span><br><span class="line"><span class="comment">                List&lt;User&gt; userList = userDao.queryUserByusername(username);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                String userString = JSON.toJsonString(userList);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                return userString;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">          &#125;</span></span><br><span class="line"><span class="comment">      &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      //dao层的实现</span></span><br><span class="line"><span class="comment">      public class UserDaoImpl impliment UserDao &#123;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        private JdbcTemplate jt = new JdbcTemplate();</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        public List&lt;User&gt; queryUserByusername(String username) &#123;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            String sql = "select * from tb_user where username = ?";</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            return jt.queryForList(sql, new RowMapper&lt;&gt;(User.class), username);</span></span><br><span class="line"><span class="comment">      &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">      <span class="comment">//返回json字符串</span></span><br><span class="line">      response.getWrite().println(userStr);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>####</p><h1 id="五、spring-springMVC-myBatise的三层实现"><a href="#五、spring-springMVC-myBatise的三层实现" class="headerlink" title="五、spring  springMVC   myBatise的三层实现"></a>五、spring springMVC myBatise的三层实现</h1><h2 id="Spring层实现"><a href="#Spring层实现" class="headerlink" title="Spring层实现"></a>Spring层实现</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line">  <span class="meta">@RequestController</span></span><br><span class="line">  <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserService userService;</span><br><span class="line"></span><br><span class="line">    ----</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 页面传的是json数据，后端使用map 或者 pojo时 需要加<span class="doctag">@RequestBody</span></span></span><br><span class="line"><span class="comment">         * 基本类型 &amp; 数组 &amp; MultipartFile</span></span><br><span class="line"><span class="comment">         * 只要保持页面的参数名称和controller方法形参一致就不用加<span class="doctag">@RequestParam</span></span></span><br><span class="line"><span class="comment">         * List 不管名字一不一样 必须加<span class="doctag">@RequestParam</span></span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    ----</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/queryByusername"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">queryByusername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> userService.queryByusername(username);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="SpringMVC层实现"><a href="#SpringMVC层实现" class="headerlink" title="SpringMVC层实现"></a>SpringMVC层实现</h2><p>//接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">queryByusername</span><span class="params">(String username)</span></span>;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>//实现类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="title">impliment</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">queryByusername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">       List&lt;User&gt; userList = userMapper.queryByusername(username);</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> userList;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>//mapper层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">  <span class="function">List&lt;User&gt; <span class="title">queryByusername</span><span class="params">(@Param(<span class="string">"username"</span>)</span> String username)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="mybatis"><a href="#mybatis" class="headerlink" title="mybatis:"></a>mybatis:</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"io.github.becounted.mapper.UserMapper"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>= <span class="string">"queryByusername"</span>&gt;</span></span><br><span class="line">  select * from tb_user where username = #&#123;username&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>//省略web.xml applicationContext.xml mybatis-config.xml等配置文件</p><h2 id="——配置文件——"><a href="#——配置文件——" class="headerlink" title="——配置文件——"></a>——配置文件——</h2><p>spring-mvc.xml:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:dubbo</span>=<span class="string">"http://code.alibabatech.com/schema/dubbo"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">						http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">						http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="tag"><span class="string">						http://www.springframework.org/schema/mvc/spring-mvc.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">						http://code.alibabatech.com/schema/dubbo</span></span></span><br><span class="line"><span class="tag"><span class="string">						http://code.alibabatech.com/schema/dubbo/dubbo.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">						http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">						http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.itheima.web"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--  allowed-origins="*"允许所有的域名都能访问</span></span><br><span class="line"><span class="comment">           allowed-methods="*"  允许所有的请求方式都能访问（GET POST DELETE PUT）--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:cors</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/**"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">allowed-origins</span>=<span class="string">"*"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">allowed-methods</span>=<span class="string">"*"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:cors</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>applicationContext.xml:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">							http://www.springframework.org/schema/beans/spring-beans-4.2.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">							http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">							http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">							http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">							http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">							http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="tag"><span class="string">							http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">							http://www.springframework.org/schema/util</span></span></span><br><span class="line"><span class="tag"><span class="string">							http://www.springframework.org/schema/util/spring-util.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span> <span class="attr">id</span>=<span class="string">"dataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://127.0.0.1:3306/blacktravel"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    配置SqlSessionFactory(告诉数据源是哪个，)--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--       告诉它我们sql文件在哪里 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mapperLocations"</span> <span class="attr">value</span>=<span class="string">"classpath*:mappers/*.xml"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    扫描mapper接口--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"com.itheima.dao"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-tags"><a href="/tags/JAVA/" rel="tag"># JAVA</a> <a href="/tags/Spring/" rel="tag"># Spring</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2019/09/19/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/" rel="next" title="冒泡排序"><i class="fa fa-chevron-left"></i> 冒泡排序</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"></div></div></footer></div></article><div class="post-spread"></div></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">Table of Contents</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">Overview</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">yddf</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/%20%7C%7C%20archive"><span class="site-state-item-count">10</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-tags"><span class="site-state-item-count">10</span> <span class="site-state-item-name">tags</span></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#一、spring中的IoC"><span class="nav-number">1.</span> <span class="nav-text">一、spring中的IoC</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、控制反转的思想"><span class="nav-number">1.1.</span> <span class="nav-text">1、控制反转的思想</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、spring核心配置文件-ApplicationContext-xml"><span class="nav-number">1.2.</span> <span class="nav-text">2、spring核心配置文件(ApplicationContext.xml)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、DI依赖注入的实现"><span class="nav-number">1.3.</span> <span class="nav-text">3、DI依赖注入的实现</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二、spring中的bean装配"><span class="nav-number">2.</span> <span class="nav-text">二、spring中的bean装配</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、实例化bean的四种方式"><span class="nav-number">2.1.</span> <span class="nav-text">1、实例化bean的四种方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#第一种方式-无参数构造器-（最常用）"><span class="nav-number">2.1.1.</span> <span class="nav-text">第一种方式 无参数构造器 （最常用）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第二种方式：-静态工厂方法"><span class="nav-number">2.1.2.</span> <span class="nav-text">第二种方式： 静态工厂方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第三种方式：-实例工厂方法"><span class="nav-number">2.1.3.</span> <span class="nav-text">第三种方式： 实例工厂方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第四种方式-FactoryBean方式"><span class="nav-number">2.1.4.</span> <span class="nav-text">第四种方式: FactoryBean方式:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#小结"><span class="nav-number">2.1.5.</span> <span class="nav-text">小结</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#三、bean的作用域"><span class="nav-number">3.</span> <span class="nav-text">三、bean的作用域</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#四、servlet的三层架构处理方式"><span class="nav-number">4.</span> <span class="nav-text">四、servlet的三层架构处理方式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#五、spring-springMVC-myBatise的三层实现"><span class="nav-number">5.</span> <span class="nav-text">五、spring springMVC myBatise的三层实现</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring层实现"><span class="nav-number">5.1.</span> <span class="nav-text">Spring层实现</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringMVC层实现"><span class="nav-number">5.2.</span> <span class="nav-text">SpringMVC层实现</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mybatis"><span class="nav-number">5.3.</span> <span class="nav-text">mybatis:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#——配置文件——"><span class="nav-number">5.4.</span> <span class="nav-text">——配置文件——</span></a></li></ol></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2020</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">yddf</span></div><div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div><span class="post-meta-divider">|</span><div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script></body></html>